@import "tailwindcss";
@import "./tokens.css";
@import "./theme.css";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --font-sans:
    var(--font-content), ui-sans-serif, system-ui, -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";

  --font-heading:
    var(--font-display), ui-serif, Georgia, Cambria, "Times New Roman", Times,
    serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji";
  /* ============================================
     SURFACE COLORS
     ============================================ */
  /* Base Surfaces */
  --color-surface-background: var(--surface-background);
  --color-surface-background-hover: var(--surface-background-hover);
  --color-surface-background-active: var(--surface-background-active);
  --color-surface-background-disabled: var(--surface-background-disabled);

  /* Elevated Surfaces */
  --color-surface-elevated-1: var(--surface-background-elevated-1);
  --color-surface-elevated-2: var(--surface-background-elevated-2);
  --color-surface-elevated-3: var(--surface-background-elevated-3);

  /* Overlay Surfaces */
  --color-surface-overlay: var(--surface-overlay);
  --color-surface-overlay-light: var(--surface-overlay-light);
  --color-surface-overlay-heavy: var(--surface-overlay-heavy);

  /* Inverse Surfaces */
  --color-surface-inverse: var(--surface-inverse);
  --color-surface-inverse-elevated: var(--surface-inverse-elevated);

  /* ============================================
     TEXT COLORS
     ============================================ */

  /* Base Text */
  --color-foreground: var(--text-foreground);
  --color-foreground-secondary: var(--text-foreground-secondary);
  --color-foreground-tertiary: var(--text-foreground-tertiary);
  --color-foreground-quaternary: var(--text-foreground-quaternary);
  --color-foreground-disabled: var(--text-foreground-disabled);

  --color-inverse: var(--text-on-inverse);
  --color-inverse-secondary: var(--text-on-inverse-secondary);

  --color-placeholder: var(--text-placeholder);
  --color-muted: var(--text-muted);

  /* ============================================
     PRIMARY
     ============================================ */

  /* Primary Surfaces */
  --color-surface-primary: var(--surface-primary);
  --color-surface-primary-hover: var(--surface-primary-hover);
  --color-surface-primary-active: var(--surface-primary-active);
  --color-surface-primary-disabled: var(--surface-primary-disabled);
  --color-surface-primary-subtle: var(--surface-primary-subtle);
  --color-surface-primary-subtle-hover: var(--surface-primary-subtle-hover);
  --color-surface-primary-elevated-1: var(--surface-primary-elevated-1);
  --color-surface-primary-elevated-2: var(--surface-primary-elevated-2);

  /* Primary Text */
  --color-primary: var(--text-primary);
  --color-primary-hover: var(--text-primary-hover);
  --color-primary-active: var(--text-primary-active);
  --color-primary-disabled: var(--text-primary-disabled);
  --color-on-primary: var(--text-on-surface-primary);
  --color-on-primary-subtle: var(--text-on-surface-primary-subtle);

  /* Primary Borders */
  --color-border-primary: var(--border-primary);
  --color-border-primary-hover: var(--border-primary-hover);
  --color-border-primary-subtle: var(--border-primary-subtle);

  /* ============================================
     SECONDARY
     ============================================ */

  /* Secondary Surfaces */
  --color-surface-secondary: var(--surface-secondary);
  --color-surface-secondary-hover: var(--surface-secondary-hover);
  --color-surface-secondary-active: var(--surface-secondary-active);
  --color-surface-secondary-disabled: var(--surface-secondary-disabled);
  --color-surface-secondary-subtle: var(--surface-secondary-subtle);
  --color-surface-secondary-subtle-hover: var(--surface-secondary-subtle-hover);
  --color-surface-secondary-elevated-1: var(--surface-secondary-elevated-1);
  --color-surface-secondary-elevated-2: var(--surface-secondary-elevated-2);

  /* Secondary Text */
  --color-secondary: var(--text-secondary);
  --color-secondary-hover: var(--text-secondary-hover);
  --color-secondary-active: var(--text-secondary-active);
  --color-secondary-disabled: var(--text-secondary-disabled);
  --color-on-secondary: var(--text-on-surface-secondary);
  --color-on-secondary-subtle: var(--text-on-surface-secondary-subtle);

  /* Secondary Borders */
  --color-border-secondary: var(--border-secondary);
  --color-border-secondary-hover: var(--border-secondary-hover);
  --color-border-secondary-subtle: var(--border-secondary-subtle);

  /* ============================================
     ACCENT
     ============================================ */

  /* Accent Surfaces */
  --color-surface-accent: var(--surface-accent);
  --color-surface-accent-hover: var(--surface-accent-hover);
  --color-surface-accent-active: var(--surface-accent-active);
  --color-surface-accent-disabled: var(--surface-accent-disabled);
  --color-surface-accent-subtle: var(--surface-accent-subtle);
  --color-surface-accent-subtle-hover: var(--surface-accent-subtle-hover);

  /* Accent Text */
  --color-accent: var(--text-accent);
  --color-accent-hover: var(--text-accent-hover);
  --color-accent-active: var(--text-accent-active);
  --color-on-accent: var(--text-on-surface-accent);

  /* ============================================
     SUCCESS
     ============================================ */

  /* Success Surfaces */
  --color-surface-success: var(--surface-success);
  --color-surface-success-hover: var(--surface-success-hover);
  --color-surface-success-active: var(--surface-success-active);
  --color-surface-success-subtle: var(--surface-success-subtle);
  --color-surface-success-subtle-hover: var(--surface-success-subtle-hover);

  /* Success Text */
  --color-success: var(--text-success);
  --color-success-hover: var(--text-success-hover);
  --color-on-success: var(--text-on-surface-success);

  /* Success Borders */
  --color-border-success: var(--border-success);
  --color-border-success-subtle: var(--border-success-subtle);

  /* ============================================
     WARNING
     ============================================ */

  /* Warning Surfaces */
  --color-surface-warning: var(--surface-warning);
  --color-surface-warning-hover: var(--surface-warning-hover);
  --color-surface-warning-active: var(--surface-warning-active);
  --color-surface-warning-subtle: var(--surface-warning-subtle);
  --color-surface-warning-subtle-hover: var(--surface-warning-subtle-hover);

  /* Warning Text */
  --color-warning: var(--text-warning);
  --color-warning-hover: var(--text-warning-hover);
  --color-on-warning: var(--text-on-surface-warning);

  /* Warning Borders */
  --color-border-warning: var(--border-warning);
  --color-border-warning-subtle: var(--border-warning-subtle);

  /* ============================================
     ERROR
     ============================================ */

  /* Error Surfaces */
  --color-surface-error: var(--surface-error);
  --color-surface-error-hover: var(--surface-error-hover);
  --color-surface-error-active: var(--surface-error-active);
  --color-surface-error-subtle: var(--surface-error-subtle);
  --color-surface-error-subtle-hover: var(--surface-error-subtle-hover);

  /* Error Text */
  --color-error: var(--text-error);
  --color-error-hover: var(--text-error-hover);
  --color-on-error: var(--text-on-surface-error);

  /* Error Borders */
  --color-border-error: var(--border-error);
  --color-border-error-subtle: var(--border-error-subtle);

  /* ============================================
     INFO
     ============================================ */

  /* Info Surfaces */
  --color-surface-info: var(--surface-info);
  --color-surface-info-hover: var(--surface-info-hover);
  --color-surface-info-active: var(--surface-info-active);
  --color-surface-info-subtle: var(--surface-info-subtle);
  --color-surface-info-subtle-hover: var(--surface-info-subtle-hover);

  /* Info Text */
  --color-info: var(--text-info);
  --color-info-hover: var(--text-info-hover);
  --color-on-info: var(--text-on-surface-info);

  /* Info Borders */
  --color-border-info: var(--border-info);
  --color-border-info-subtle: var(--border-info-subtle);

  /* ============================================
     BASE BORDERS
     ============================================ */

  --color-border-base: var(--border-base);
  --color-border-base-hover: var(--border-base-hover);
  --color-border-base-active: var(--border-base-active);
  --color-border-base-disabled: var(--border-base-disabled);

  --color-border-subtle: var(--border-subtle);
  --color-border-strong: var(--border-strong);
  --color-border-inverse: var(--border-inverse);

  /* Focus States */
  --color-border-focus: var(--border-focus);
  --color-border-focus-ring: var(--border-focus-ring);
  --color-border-focus-offset: var(--border-focus-ring-offset);

  /* ============================================
     LINKS
     ============================================ */

  --color-link: var(--link-base);
  --color-link-hover: var(--link-hover);
  --color-link-active: var(--link-active);
  --color-link-visited: var(--link-visited);
  --color-link-disabled: var(--link-disabled);

  /* ============================================
     BUTTONS
     ============================================ */

  /* Primary Button */
  --color-button-primary-bg: var(--button-primary-bg);
  --color-button-primary-bg-hover: var(--button-primary-bg-hover);
  --color-button-primary-bg-active: var(--button-primary-bg-active);
  --color-button-primary-bg-disabled: var(--button-primary-bg-disabled);
  --color-button-primary-text: var(--button-primary-text);
  --color-button-primary-text-disabled: var(--button-primary-text-disabled);
  --color-button-primary-border: var(--button-primary-border);

  /* Secondary Button */
  --color-button-secondary-bg: var(--button-secondary-bg);
  --color-button-secondary-bg-hover: var(--button-secondary-bg-hover);
  --color-button-secondary-bg-active: var(--button-secondary-bg-active);
  --color-button-secondary-bg-disabled: var(--button-secondary-bg-disabled);
  --color-button-secondary-text: var(--button-secondary-text);
  --color-button-secondary-text-disabled: var(--button-secondary-text-disabled);
  --color-button-secondary-border: var(--button-secondary-border);

  /* Outline Button */
  --color-button-outline-bg: var(--button-outline-bg);
  --color-button-outline-bg-hover: var(--button-outline-bg-hover);
  --color-button-outline-bg-active: var(--button-outline-bg-active);
  --color-button-outline-text: var(--button-outline-text);
  --color-button-outline-text-hover: var(--button-outline-text-hover);
  --color-button-outline-border: var(--button-outline-border);

  /* Ghost Button */
  --color-button-ghost-bg: var(--button-ghost-bg);
  --color-button-ghost-bg-hover: var(--button-ghost-bg-hover);
  --color-button-ghost-bg-active: var(--button-ghost-bg-active);
  --color-button-ghost-text: var(--button-ghost-text);
  --color-button-ghost-text-hover: var(--button-ghost-text-hover);

  /* Destructive Button */
  --color-button-destructive-bg: var(--button-destructive-bg);
  --color-button-destructive-bg-hover: var(--button-destructive-bg-hover);
  --color-button-destructive-bg-active: var(--button-destructive-bg-active);
  --color-button-destructive-text: var(--button-destructive-text);

  --spacing-nav-height: 5rem;
}

:root {
  interpolate-size: allow-keywords;
  --container-padding: clamp(1rem, 4vw, 2rem);
  --container-max-width: 80rem; /* 1280px */

  --content-width: min(
    100% - (var(--container-padding) * 2),
    var(--container-max-width)
  );
}

body,
html {
  @apply scroll-smooth antialiased;
}

body {
  @apply bg-surface-background text-foreground;
}

@layer base {
  h1,
  h2,
  h3,
  h4,
  p,
  ul,
  ol {
    @apply mb-5;
  }

  h1,
  h2,
  h3,
  h4 {
    @apply text-foreground leading-none font-bold tracking-tight text-balance;
  }

  h1 {
    font-size: var(--text-3xl);
  }
  h2 {
    font-size: var(--text-2xl);
    @apply mt-9;
  }
  h3 {
    font-size: var(--text-xl);
    @apply mt-8;
  }
  h4 {
    font-size: var(--text-lg);
  }

  p {
    font-size: var(--text-base);
    @apply text-foreground leading-normal text-pretty;
  }

  small {
    font-size: var(--text-xs);
    @apply text-muted;
  }

  a {
    @apply decoration-primary/30 underline underline-offset-4 transition-colors;
    &:hover {
      @apply decoration-primary text-primary;
    }
  }

  ul,
  ol {
    list-style-position: outside;
    @apply pl-6;
  }

  ul {
    @apply list-disc;
  }
  ol {
    @apply list-decimal;
  }

  li {
    @apply mb-2;
  }

  h1:last-child,
  h2:last-child,
  h3:last-child,
  p:last-child,
  ul:last-child {
    @apply mb-0;
  }
}

@utility width-transition {
  transition: width var(--container-transition, 0.3s ease-in-out);
}

@utility scroll-container {
  scrollbar-gutter: stable;
  @apply width-transition overflow-y-auto overscroll-contain;
}

@utility container {
  @apply width-transition mx-auto w-(--content-width);
}

@utility content-container {
  & > * + * {
    @apply mt-5;
  }
  @apply width-transition mx-auto max-w-[75ch] px-6 leading-normal;
}

@utility layout-grid {
  display: grid;
  grid-template-columns:
    [full-start] minmax(var(--container-padding), 1fr)
    [popout-start] 2rem
    [content-start] var(--content-width) [content-end]
    2rem [popout-end]
    minmax(var(--container-padding), 1fr) [full-end];

  & > :not(.full-bleed, .popout) {
    grid-column: content;
  }

  & > .full-bleed {
    grid-column: full;
    @apply block w-full;
  }

  & > .popout {
    grid-column: popout;
  }

  @apply width-transition;
}

@utility button--pressed {
  @apply scale-[.98];
}

/* GLASSMORPHISM UTILITY */

@utility glass {
  border: 1px solid rgba(255, 255, 255, 0.2);

  @supports (backdrop-filter: blur(12px)) {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
  }

  @supports not (backdrop-filter: blur(12px)) {
    background: rgba(255, 255, 255, 0.8);
  }
}

@utility glass-frosted {
  border: 1px solid rgba(255, 255, 255, 0.4);

  @supports (backdrop-filter: blur(20px) saturate(180%)) {
    background: rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(20px) saturate(180%);
  }

  @supports not ((backdrop-filter: blur(20px) saturate(180%))) {
    background: rgba(255, 255, 255, 0.95);
  }
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --container-transition: none;
  }
}
